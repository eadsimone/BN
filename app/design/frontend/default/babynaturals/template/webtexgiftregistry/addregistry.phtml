<?php
/**
 * Webtex
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the EULA that is bundled
 * with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.webtexsoftware.com/LICENSE.txt
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to info@webtexsoftware.com and we will send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade the extension to newer
 * versions in the future. If you wish to customize the extension for your
 * needs please refer to http://www.webtexsoftware.com for more information, 
 * or contact us through this email: info@webtexsoftware.com.
 *
 * @category   design_default
 * @package    Webtex_GiftRegistry
 * @copyright  Copyright (c) 2011 Webtex Solutions, LLC (http://www.webtexsoftware.com/)
 * @license    http://www.webtexsoftware.com/LICENSE.txt End-User License Agreement
 */
?>

<div class="page-title">
    <h1><?php echo $this->__('Create Gift Registry') ?></h1>
</div>
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
<form action="<?php echo $this->getSaveUrl() ?>" method="post" id="form-validate" enctype="multipart/form-data">

<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Registy') ?></h2>
    <ul class="form-list">
        <li>
            <label for="regtitle" class="required"><?php echo $this->__('Registry Title') ?> <em>*</em></label>
            <div class="input-box"><input type="text" name="regtitle" id="regtitle" value="<?php echo $this->getRegistrantTitle()?>" title="<?php echo $this->__('Registry Title') ?>" class="required-entry input-text" />  </div>        
        </li>
    </ul>
</div>

<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Registrant') ?></h2>
    <ul class="form-list">
        <li class="fields">
            <div class="field name-firstname">
                <label for="firstname" class="required"><?php echo $this->__('First Name') ?> <em>*</em></label>
                <div class="input-box"><input type="text" id="firstname" name="firstname" value="<?php echo Mage::getSingleton('customer/session')->getCustomer()->getFirstname()?>" title="<?php echo $this->__('First Name') ?>" class="required-entry input-text"/></div>
            </div>

            <div class="field name-lastname">
                <label for="lastname" class="required"><?php echo $this->__('Last Name') ?> <em>*</em></label>
                <div class="input-box"><input type="text" id="lastname" name="lastname" value="<?php echo Mage::getSingleton('customer/session')->getCustomer()->getLastname()?>" title="<?php echo $this->__('Last Name') ?>" class="required-entry input-text" /></div>
            </div>    
        </li>
        <li>
             <div class="field name-lastname">
                <label for="maidenname"><?php echo $this->__('Maiden Name (if applicable)') ?></label>
               <div class="input-box"> <input type="text" id="maidenname" name="maidenname" value="" title="<?php echo $this->__('Maiden Name') ?>" class="input-text" /></div>
            </div>
        </li>
        <li>
            <div class="field">
            <label for="email" class="required"><?php echo $this->__('Email Address') ?> <em>*</em></label>
            <div class="input-box"><input type="text" name="email" id="email" value="<?php echo Mage::getSingleton('customer/session')->getCustomer()->getEmail()?>" title="<?php echo $this->__('Email Address') ?>" class="required-entry validate-email input-text" /></div>
            </div>
        </li>
    </ul>
</div>




<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Co-Registrant') ?></h2>
    <ul class="form-list">
        <li>
            <div class="field name-firstname">
                <label for="co_firstname"><?php echo $this->__('First Name') ?></label>
                <div class="input-box"><input type="text" id="co_firstname" name="co_firstname" value="" title="<?php echo $this->__('First Name') ?>" class="input-text"/></div>
            </div>

            <div class="field name-lastname">
                <label for="co_lastname"><?php echo $this->__('Last Name') ?></label>
                <div class="input-box"><input type="text" id="co_lastname" name="co_lastname" value="" title="<?php echo $this->__('Last Name') ?>" class="input-text" /></div>
            </div>    
        </li>
        <li>
             <div class="field name-lastname">
                <label for="co_maidenname"><?php echo $this->__('Maiden Name (if applicable)') ?></label>
               <div class="input-box"> <input type="text" id="co_maidenname" name="co_maidenname" value="" title="<?php echo $this->__('Maiden Name') ?>" class="input-text" /></div>
            </div>
        </li>
        <li>
            <div class="field">
            <label for="co_email"><?php echo $this->__('Email Address') ?></label>
           <div class="input-box"> <input type="text" name="co_email" id="co_email" value="" title="<?php echo $this->__('Email Address') ?>" class="validate-email input-text" /></div>
            </div>
        </li>
    </ul>
</div>


<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Event') ?></h2>
    <ul class="form-list">
        <li>
            <label for="gift_exp_arriv_date" class="required"><?php echo $this->__('Event Date') ?> <em>*</em></label>

                <div class="input-box"><input type="text" id="gift_exp_arriv_date" name="gift_exp_arriv_date" value="" title="<?php echo $this->__('Event Date') ?>" class="required-entry validate-date input-text"/></div> &nbsp;
            <img src="<?php echo Mage::getDesign()->getSkinUrl('images/grid-cal.gif'); ?>" alt="" class="v-middle" id="gift_exp_arriv_date_button" title="<?php echo $this->__('Date selector') ?>"/>
            <script type="text/javascript">
                Calendar.setup({
                    inputField : "gift_exp_arriv_date",
                    ifFormat : "%m/%d/%y",
                    button : "gift_exp_arriv_date_button",
                    align : "Bl",
                    singleClick : true
                });
            </script>
        </li>
        <li> 
            <label for="event_location"><?php echo $this->__('Event Location') ?></label>
            <div class="field">
               <div class="input-box"> <input type="text" id="event_location" name="event_location" value="" title="<?php echo $this->__('Event Location') ?>" class="input-text"/></div>
            </div>
        </li>
        <li>
            <label for="parent_notes"><?php echo $this->__('Message for Registry Guests') ?></label>
            <textarea rows="4" wrap="on" name="parent_notes" class="input-text" id="parent_notes"></textarea>
        </li>
    </ul>
</div>

<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Shipping Address'); ?></h2>
    <ul class="form-list">
        <li class="fields wide">
            <?php if($this->getAddressesHtmlSelect()):
             echo $this->__('Please choose a shipping address for your gifts from your address book:'); ?>
            <br />
            <?php echo $this->getAddressesHtmlSelect() ?>
            <br/><br/>
            <input type="checkbox" class="specify-address">&nbspI want to specify a shipping address for the gifts (it will be added to you address book as well).
            <?php else: ?>
            <?php echo $this->__('To choose a shipping address for your gifts, please add an address to your address book first.'); ?>
            <br/><br/>
            <input type="checkbox" class="specify-address">&nbspI want to specify a shipping address for the gifts (it will be added to you address book as well).
            <?php endif; ?>

            <script type="text/javascript">
                $$(".specify-address")[0].observe('click', function(){
                    $$(".specify-address")[0].checked ? showAddressFields() : hideAddressFields();
                });
                function showAddressFields()
                {
                    if($$(".address-select")[0] != undefined){
                        $$(".address-select")[0].disable();
                    }
                    var reloadurl = '<?php echo $this->getUrl('webtexgiftregistry/index/getaddressfields') ?>';
                    new Ajax.Request(reloadurl, {
                        method: 'get',
                        onComplete: function(transport) {
                            $$(".output-address-form")[0].innerHTML = transport.responseText;
                            new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'zip');
                        }
                    });
                }

                function hideAddressFields()
                {
                    $$(".output-address-form")[0].innerHTML = "";
                    if($$(".address-select")[0] != undefined){
                        $$(".address-select")[0].enable();
                    }

                }

            </script>

        </li>
        <li><div class="output-address-form"></div></li>
    </ul>
</div>

<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Add a Photo') ?></h2>
    <ul class="form-list">
        <li> 
            <div class="field">
                <input id="filename" name="filename" value="" type="file" />
            </div>
        </li>
    </ul>
</div>

<div class="fieldset">
    <h2 class="legend"><?php echo $this->__('Registry Status') ?></h2>
    <ul class="form-list">
        <li class="control"> 
            <input type="radio" id="publ_registry" name="status" value="0" checked="checked"/> <label for="publ_registry"><?php echo $this->__('Public Registry (available to everyone through registry search, and direct access using direct link)') ?></label>
        </li>
        <li class="control">
            <input type="radio" id="priv_registry" name="status" value="1"/> <label for="priv_registry"><?php echo $this->__('Private Registry (available only to those, who have your unique ID or direct link to your Gift Registry)') ?></label>
        </li>
    </ul>
</div>



<div class="buttons-set">
    <p class="required"><?php echo $this->__('* Required Fields') ?></p>
    <button type="submit" class="button"><span><span><?php echo $this->__('Create Registry') ?></span></span></button>
</div>
</form>
<script type="text/javascript">
    var dataForm = new VarienForm('form-validate', true);
</script>

